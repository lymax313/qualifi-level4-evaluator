<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Qualifi Level 4 Evaluator - Gemini AI</title><script src="https://cdn.tailwindcss.com"></script></head><body class="bg-gray-50 min-h-screen py-8"><div class="max-w-4xl mx-auto px-4"><div class="bg-white rounded-lg shadow-lg p-8"><h1 class="text-3xl font-bold text-center mb-2">Qualifi Level 4 Assignment Evaluator</h1><p class="text-center text-gray-600 mb-8">AI-powered evaluation with Gemini - Strict rubric-based scoring</p><form id="evalForm" class="space-y-6" enctype="multipart/form-data"><div class="grid grid-cols-3 gap-4"><div><label class="block text-sm font-medium mb-2">Student Name</label><input type="text" id="studentName" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"></div><div><label class="block text-sm font-medium mb-2">Student ID</label><input type="text" id="studentId" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"></div><div><label class="block text-sm font-medium mb-2">Module</label><select id="module" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"><option value="">Select module...</option><option>SEM301DS - Strategic Management</option><option>SEM302DS - Project Management</option><option>SEM303DS - Financial Management</option><option>SEM304DS - Human Resource Management</option><option>SEM305DS - Marketing Management</option><option>SEM306DS - Operations Management</option><option>SEM307DS - Business Ethics</option><option>SEM308DS - Entrepreneurship</option><option>SEM309DS - Business Law</option><option>SEM310DS - International Business</option><option>SEM311DS - Research Methods</option><option>SEM312DS - Business Analytics</option><option>SEM313DS - Leadership</option><option>SEM314DS - Innovation Management</option></select></div></div><div><label class="block text-sm font-medium mb-2">Upload Assignment File (.txt, .pdf, .docx)</label><input type="file" id="assignmentFile" required accept=".txt,.pdf,.docx" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"></div><button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold">Evaluate Assignment with Gemini AI</button></form><div id="loading" class="hidden mt-6 text-center"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><p class="mt-2 text-gray-600">Evaluating with Gemini AI...</p></div><div id="result" class="hidden mt-8 space-y-4"></div></div></div><script>document.getElementById('evalForm').addEventListener('submit',async(e)=>{e.preventDefault();const form=e.target;const loading=document.getElementById('loading');const result=document.getElementById('result');loading.classList.remove('hidden');result.classList.add('hidden');const formData=new FormData();formData.append('student_name',document.getElementById('studentName').value);formData.append('student_id',document.getElementById('studentId').value);formData.append('module',document.getElementById('module').value);formData.append('assignment',document.getElementById('assignmentFile').files[0]);try{const res=await fetch('/api/evaluate',{method:'POST',body:formData});const data=await res.json();loading.classList.add('hidden');if(data.success){result.innerHTML=`<div class="bg-green-50 border border-green-200 rounded-lg p-6"><h2 class="text-2xl font-bold mb-4">Evaluation Complete</h2><div class="grid grid-cols-2 gap-4 mb-4"><div><p class="text-sm text-gray-600">Student:</p><p class="font-semibold">${data.student_name}</p></div><div><p class="text-sm text-gray-600">ID:</p><p class="font-semibold">${data.student_id}</p></div><div><p class="text-sm text-gray-600">Module:</p><p class="font-semibold">${data.module}</p></div><div><p class="text-sm text-gray-600">Final Grade:</p><p class="text-2xl font-bold text-blue-600">${data.grade} (${data.total_score}/100)</p></div></div><div class="bg-white rounded p-4 mb-4"><h3 class="font-bold mb-3">Detailed Scores:</h3>${Object.entries(data.evaluation).map(([k,v])=>`<div class="mb-3 pb-3 border-b last:border-0"><div class="flex justify-between items-center mb-1"><span class="font-semibold">${k}</span><span class="text-blue-600 font-bold">${v.score}/100 [${v.band||'N/A'}]</span></div><p class="text-sm text-gray-600">Weighted: ${v.weighted.toFixed(2)} | ${v.feedback}</p></div>`).join('')}</div><a href="${data.pdf_url}" download class="inline-block bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-semibold">Download PDF Report</a></div>`;result.classList.remove('hidden')}else{result.innerHTML=`<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-red-800">Error: ${data.detail||'Evaluation failed'}</p></div>`;result.classList.remove('hidden')}}catch(err){loading.classList.add('hidden');result.innerHTML=`<div class="bg-red-50 border border-red-200 rounded-lg p-4"><p class="text-red-800">Error: ${err.message}</p></div>`;result.classList.remove('hidden')}});</script></body></html>
